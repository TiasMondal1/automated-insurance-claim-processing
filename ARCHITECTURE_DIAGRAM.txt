╔════════════════════════════════════════════════════════════════════════════════╗
║                 AI-POWERED INSURANCE CLAIM PROCESSING SYSTEM                   ║
║                          Multi-Agent Architecture                              ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────────┐
│                           USER INTERFACE LAYER                                │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      STREAMLIT WEB APPLICATION                       │    │
│  │                                                                      │    │
│  │  • File Upload (JSON, PDF, TXT)                                     │    │
│  │  • Sample Data Selection                                            │    │
│  │  • Real-time Processing                                             │    │
│  │  • Results Visualization                                            │    │
│  │  • Report Download                                                  │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                      │                                        │
└──────────────────────────────────────┼────────────────────────────────────────┘
                                       │
                                       ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                        ORCHESTRATION LAYER                                    │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      ORCHESTRATOR AGENT                              │    │
│  │                                                                      │    │
│  │  • Workflow Coordination                                            │    │
│  │  • Agent Communication                                              │    │
│  │  • Error Handling                                                   │    │
│  │  • Result Aggregation                                               │    │
│  │  • State Management                                                 │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                      │                                        │
└──────────────────────────────────────┼────────────────────────────────────────┘
                                       │
                    ┌──────────────────┼──────────────────┐
                    │                  │                  │
                    ▼                  ▼                  ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                          AGENT PROCESSING LAYER                               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐          │
│  │  EXTRACTION      │  │  VALIDATION      │  │   DECISION       │          │
│  │     AGENT        │  │     AGENT        │  │     AGENT        │          │
│  ├──────────────────┤  ├──────────────────┤  ├──────────────────┤          │
│  │                  │  │                  │  │                  │          │
│  │ • Parse Claims   │  │ • Policy Check   │  │ • Approve/Reject │          │
│  │ • Extract Codes  │  │ • Coverage Valid │  │ • Confidence     │          │
│  │ • Structure Data │  │ • Limits Check   │  │ • Flag Issues    │          │
│  │ • Identify Gaps  │  │ • Exclusions     │  │ • Calculate $$$  │          │
│  │ • NER/Parsing    │  │ • Pre-auth       │  │ • Risk Analysis  │          │
│  │                  │  │ • Financial Calc │  │                  │          │
│  └────────┬─────────┘  └────────┬─────────┘  └────────┬─────────┘          │
│           │                     │                     │                     │
│           └─────────────────────┼─────────────────────┘                     │
│                                 │                                            │
│                                 ▼                                            │
│                    ┌──────────────────────┐                                 │
│                    │   EXPLANATION        │                                 │
│                    │      AGENT           │                                 │
│                    ├──────────────────────┤                                 │
│                    │                      │                                 │
│                    │ • Generate Reports   │                                 │
│                    │ • Patient-Friendly   │                                 │
│                    │ • Next Steps         │                                 │
│                    │ • FAQ Generation     │                                 │
│                    │ • PDF Creation       │                                 │
│                    └──────────────────────┘                                 │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                          INFRASTRUCTURE LAYER                                 │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐          │
│  │   LLM PROVIDER   │  │  DOCUMENT PARSER │  │ REPORT GENERATOR │          │
│  ├──────────────────┤  ├──────────────────┤  ├──────────────────┤          │
│  │                  │  │                  │  │                  │          │
│  │ • OpenAI GPT-4   │  │ • JSON Parser    │  │ • PDF Reports    │          │
│  │ • Anthropic      │  │ • PDF Reader     │  │ • Text Format    │          │
│  │   Claude         │  │ • Text Extract   │  │ • Charts/Tables  │          │
│  │ • Fallback Logic │  │ • OCR Ready      │  │ • Styling        │          │
│  │ • Rate Limiting  │  │ • Validation     │  │ • Templates      │          │
│  │                  │  │                  │  │                  │          │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘          │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                            DATA LAYER                                         │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐          │
│  │   CLAIM MODEL    │  │   POLICY MODEL   │  │  DECISION MODEL  │          │
│  ├──────────────────┤  ├──────────────────┤  ├──────────────────┤          │
│  │                  │  │                  │  │                  │          │
│  │ • Claimant Info  │  │ • Coverage Rules │  │ • Decision Type  │          │
│  │ • Diagnosis      │  │ • Deductibles    │  │ • Confidence     │          │
│  │ • Procedures     │  │ • Copay/Coins    │  │ • Financial      │          │
│  │ • Amounts        │  │ • Limits         │  │ • Validation     │          │
│  │ • Provider       │  │ • Exclusions     │  │ • Reasoning      │          │
│  │                  │  │                  │  │                  │          │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘          │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                              DATA FLOW DIAGRAM
═══════════════════════════════════════════════════════════════════════════════

    INPUT                    PROCESSING                         OUTPUT
    
┌─────────┐              ┌──────────────┐                  ┌─────────────┐
│ Claim   │──────────────▶│ EXTRACTION   │─────────┐       │             │
│ Document│              │    AGENT     │         │       │             │
└─────────┘              └──────────────┘         │       │             │
                                                  ▼       │             │
┌─────────┐              ┌──────────────┐    ┌────────┐  │   FINAL     │
│ Policy  │──────────────▶│ VALIDATION   │───▶│ Struct │  │   REPORT    │
│ Document│              │    AGENT     │    │  Data  │  │             │
└─────────┘              └──────────────┘    └────┬───┘  │  • Decision │
                                                  │       │  • Financial│
┌─────────┐              ┌──────────────┐        │       │  • Explain  │
│ Medical │──────────────▶│  DECISION    │────────┤       │  • Next     │
│ Report  │              │    AGENT     │        │       │    Steps    │
└─────────┘              └──────────────┘        │       │  • PDF      │
                                                  ▼       │             │
                         ┌──────────────┐    ┌────────┐  │             │
                         │ EXPLANATION  │───▶│ Report │─▶│             │
                         │    AGENT     │    │  Data  │  │             │
                         └──────────────┘    └────────┘  └─────────────┘


═══════════════════════════════════════════════════════════════════════════════
                         AGENT INTERACTION SEQUENCE
═══════════════════════════════════════════════════════════════════════════════

User                Orchestrator      Extraction    Validation    Decision    Explanation
 │                       │                 │             │            │            │
 │  Submit Claim         │                 │             │            │            │
 ├──────────────────────▶│                 │             │            │            │
 │                       │                 │             │            │            │
 │                       │  Extract Data   │             │            │            │
 │                       ├────────────────▶│             │            │            │
 │                       │                 │             │            │            │
 │                       │  Structured     │             │            │            │
 │                       │◀────────────────┤             │            │            │
 │                       │                 │             │            │            │
 │                       │  Validate       │             │            │            │
 │                       ├─────────────────┼────────────▶│            │            │
 │                       │                 │             │            │            │
 │                       │  Validation OK  │             │            │            │
 │                       │◀────────────────┼─────────────┤            │            │
 │                       │                 │             │            │            │
 │                       │  Make Decision  │             │            │            │
 │                       ├─────────────────┼─────────────┼───────────▶│            │
 │                       │                 │             │            │            │
 │                       │  Decision       │             │            │            │
 │                       │◀────────────────┼─────────────┼────────────┤            │
 │                       │                 │             │            │            │
 │                       │  Generate Report│             │            │            │
 │                       ├─────────────────┼─────────────┼────────────┼───────────▶│
 │                       │                 │             │            │            │
 │                       │  Final Report   │             │            │            │
 │                       │◀────────────────┼─────────────┼────────────┼────────────┤
 │                       │                 │             │            │            │
 │  Display Results      │                 │             │            │            │
 │◀──────────────────────┤                 │             │            │            │
 │                       │                 │             │            │            │


═══════════════════════════════════════════════════════════════════════════════
                           TECHNOLOGY STACK
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│  FRONTEND                                                                    │
│  • Streamlit 1.31.0                                                         │
│  • Plotly (Charts)                                                          │
│  • Pandas (Data Display)                                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  AI/ML                                                                       │
│  • OpenAI GPT-4 Turbo                                                       │
│  • Anthropic Claude 3                                                       │
│  • LangChain 0.1.9                                                          │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  DATA PROCESSING                                                             │
│  • Pydantic 2.6.1 (Validation)                                              │
│  • PyPDF2 3.0.1 (PDF Parsing)                                               │
│  • pdfplumber 0.10.3 (Advanced PDF)                                         │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  REPORTING                                                                   │
│  • ReportLab 4.0.9 (PDF Generation)                                         │
│  • Matplotlib 3.8.2 (Charts)                                                │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  INFRASTRUCTURE                                                              │
│  • Python 3.8+                                                              │
│  • python-dotenv (Config)                                                   │
│  • pytest (Testing)                                                         │
└─────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                        DEPLOYMENT ARCHITECTURE
═══════════════════════════════════════════════════════════════════════════════

                              ┌──────────────┐
                              │   Internet   │
                              └──────┬───────┘
                                     │
                              ┌──────▼───────┐
                              │ Load Balancer│
                              │   (Nginx)    │
                              └──────┬───────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
             ┌──────▼──────┐  ┌──────▼──────┐  ┌──────▼──────┐
             │  Streamlit  │  │  Streamlit  │  │  Streamlit  │
             │  Instance 1 │  │  Instance 2 │  │  Instance 3 │
             └──────┬──────┘  └──────┬──────┘  └──────┬──────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                     │
                              ┌──────▼───────┐
                              │  Agent Pool  │
                              │  (Workers)   │
                              └──────┬───────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
             ┌──────▼──────┐  ┌──────▼──────┐  ┌──────▼──────┐
             │   Database  │  │ File Storage│  │  LLM APIs   │
             │  (Metadata) │  │ (Documents) │  │ (OpenAI/    │
             │             │  │             │  │  Anthropic) │
             └─────────────┘  └─────────────┘  └─────────────┘


═══════════════════════════════════════════════════════════════════════════════
                            SECURITY LAYERS
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│  APPLICATION SECURITY                                                        │
│  • Environment-based API keys                                               │
│  • No hardcoded credentials                                                 │
│  • Input validation and sanitization                                        │
│  • Rate limiting                                                            │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  DATA SECURITY                                                               │
│  • PHI/PII handling (HIPAA compliant)                                       │
│  • Encryption at rest                                                       │
│  • Encryption in transit (HTTPS)                                            │
│  • Secure file storage                                                      │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  ACCESS CONTROL                                                              │
│  • Role-based access control (RBAC)                                         │
│  • Audit logging                                                            │
│  • Session management                                                       │
└─────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
